import intro;
import location as loc;
import lifesys;
import patterns.patternbase;
import patterns.stage;


function onPluginStart() {
    lifesys.initLifeSys();
    patternbase.addPattern(stage.f_impl);
}


function afterTriggerExec() {
    SetInvincibility(Enable, '(any unit)', AllPlayers, 'Anywhere');
    SetResources(AllPlayers, SetTo, 5000, Ore);

    if(Bring(P1, AtLeast, 1, "Terran Supply Depot", "Anywhere")) {
        patternbase.addPattern(stage.f_impl);
        RemoveUnit("Terran Supply Depot", P1);
    }

    patternbase.loopPatterns();
    intro.introLoop();
    lifesys.lifeSysLoop();
}
